#!/bin/sh

pgrep -x lemonbar > /dev/null && echo "The panel is already running." && exit 1

PANEL_FIFO=/tmp/panel-fifo
[ -e "$PANEL_FIFO" ] && rm "$PANEL_FIFO"
mkfifo "$PANEL_FIFO"
bspc subscribe all > "$PANEL_FIFO" &

lemonout < "$PANEL_FIFO" | lemonbar \
	-u 2 \
	-U "#aa0000" \
	-f "consolas:size=10:style=bold" \
	-B "#000000" \
	-F "#D8DEE9" \
	-o 1 | sh &

while true; do
	refpanel
	sleep 10
done
