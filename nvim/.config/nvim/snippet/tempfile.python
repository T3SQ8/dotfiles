import tempfile

def open_in_editor(contents):
    with tempfile.NamedTemporaryFile(mode='r+') as tmp:
        tmp.writelines(contents)
        tmp.flush()
        try:
            editor = os.environ['EDITOR']
        except KeyError:
            editor = 'vi'
        subprocess.call([editor, tmp.name])
        tmp.seek(0)
        contents = tmp.readlines()
        return contents
