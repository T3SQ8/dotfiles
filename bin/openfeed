#!/bin/sh

[ "$#" = 0 ] && { echo "No url provided"; exit 1; }

for url do :; done

while getopts baltv arg; do
	case $arg in
		b) browser=1 ;;
		a) audio=1 ;;
		l) duration=1 ;;
		t) thumbnail=1 ;;
		v) video=1 ;;
		\?) exit 1 ;;
	esac
	default=1
done

[ "$browser" ] && xdg-open "$url" 2> /dev/null
[ "$audio" ] && $TERMINAL -e mpv --no-video "$url"
[ "$duration" ] && notify-send "$(youtube-dl --get-filename --get-duration --skip-download -o '%(title)s' "$url")"
[ "$thumbnail" ] && convert "$(youtube-dl --write-thumbnail --skip-download "$url" -o "/tmp/thumb" | awk '/Writing thumbnail/ {print $NF}')" /tmp/thumb.jpg && xdg-open /tmp/thumb.jpg &
[ "$video" ] || [ ! "$default" ] && { mpv --no-terminal "$url" & notify-send "Sent to mpv" ;}
